perms(l) := let {insert: {i, x, l} l[~i-1]+[x]+l[i~]} sum([[insert(i, l[0], p) for p in perms(cdr(l))] for i in range(len(l))])
perms([1,2,3]) #[[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]
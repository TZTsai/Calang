{
  "calc_parse": [
    [
      [
        "[a@a in 1, b in 213]"
      ],
      [
        [
          "GENLS",
          [
            "NAME",
            "a"
          ],
          [
            "DOM",
            [
              "NAME",
              "a"
            ],
            [
              "REAL",
              "1"
            ]
          ],
          [
            "DOM",
            [
              "NAME",
              "b"
            ],
            [
              "REAL",
              "213"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[a@a in 1, b in 213, c=3, d<2]"
      ],
      [
        [
          "GENLS",
          [
            "NAME",
            "a"
          ],
          [
            "DOM",
            [
              "NAME",
              "a"
            ],
            [
              "REAL",
              "1"
            ]
          ],
          [
            "DOM",
            [
              "NAME",
              "b"
            ],
            [
              "REAL",
              "213"
            ]
          ],
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "c"
              ]
            ],
            [
              "REAL",
              "3"
            ]
          ],
          [
            "PHRASE",
            [
              "NAME",
              "d"
            ],
            [
              "OP",
              "<"
            ],
            [
              "REAL",
              "2"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "%%"
      ],
      [
        [
          "PYTHON"
        ],
        ""
      ]
    ],
    [
      [
        "[a=121]"
      ],
      [
        [
          "LIST",
          [
            "KWD",
            [
              "NAME",
              "a"
            ],
            [
              "REAL",
              "121"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[x @ x in 1:10]"
      ],
      [
        [
          "GENLS",
          [
            "NAME",
            "x"
          ],
          [
            "DOM",
            [
              "NAME",
              "x"
            ],
            [
              "PHRASE",
              [
                "REAL",
                "1"
              ],
              [
                "OP",
                ":"
              ],
              [
                "REAL",
                "10"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x -> 4"
      ],
      [
        [
          "MAP",
          [
            "FORM",
            [
              "NAME",
              "x"
            ]
          ],
          [
            "REAL",
            "4"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "y = 1 if 0 or 4"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "y"
            ]
          ],
          [
            "PHRASE",
            [
              "REAL",
              "1"
            ],
            [
              "OP",
              "if "
            ],
            [
              "REAL",
              "0"
            ],
            [
              "OP",
              "or "
            ],
            [
              "REAL",
              "4"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[x, y.., z=2, w..] = [1,[2],[3,4],5,z=3]"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "LIST",
              [
                "NAME",
                "x"
              ],
              [
                "UNPACK",
                [
                  "NAME",
                  "y"
                ]
              ],
              [
                "KWD",
                [
                  "NAME",
                  "z"
                ],
                [
                  "REAL",
                  "2"
                ]
              ],
              [
                "UNPACK",
                [
                  "NAME",
                  "w"
                ]
              ]
            ]
          ],
          [
            "LIST",
            [
              "REAL",
              "1"
            ],
            [
              "LIST",
              [
                "REAL",
                "2"
              ]
            ],
            [
              "LIST",
              [
                "REAL",
                "3"
              ],
              [
                "REAL",
                "4"
              ]
            ],
            [
              "REAL",
              "5"
            ],
            [
              "KWD",
              [
                "NAME",
                "z"
              ],
              [
                "REAL",
                "3"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x = 9"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "x"
            ]
          ],
          [
            "REAL",
            "9"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x] = 9"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ],
          [
            "REAL",
            "9"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f x = 9"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "NAME",
              "x"
            ]
          ],
          [
            "REAL",
            "9"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x] @g[x] = x"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "f"
          ],
          [
            "LIST",
            [
              "NAME",
              "x"
            ]
          ]
        ],
        " @g[x] = x"
      ]
    ],
    [
      [
        "x @e = s"
      ],
      [
        [
          "NAME",
          "x"
        ],
        " @e = s"
      ]
    ],
    [
      [
        "import Matrix; m = Matrix[[1,2],[3,4]]; m.inv[]"
      ],
      [
        [
          "IMPORT",
          "Matrix"
        ],
        "; m = Matrix[[1,2],[3,4]]; m.inv[]"
      ]
    ],
    [
      [
        "[1, 2; 3, 4]"
      ],
      [
        [
          "LINE"
        ],
        "[1, 2; 3, 4]"
      ]
    ],
    [
      [
        "[1;3;5]"
      ],
      [
        [
          "LINE"
        ],
        "[1;3;5]"
      ]
    ],
    [
      [
        "2+9"
      ],
      [
        [
          "PHRASE",
          [
            "REAL",
            "2"
          ],
          [
            "OP",
            "+"
          ],
          [
            "REAL",
            "9"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x] @g[x,x] = this"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "f"
          ],
          [
            "LIST",
            [
              "NAME",
              "x"
            ]
          ]
        ],
        " @g[x,x] = this"
      ]
    ],
    [
      [
        "a=3;a"
      ],
      [
        [
          "EVAL",
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "a"
              ]
            ],
            [
              "REAL",
              "3"
            ]
          ],
          [
            "NAME",
            "a"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "a=3; a"
      ],
      [
        [
          "EVAL",
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "a"
              ]
            ],
            [
              "REAL",
              "3"
            ]
          ],
          [
            "NAME",
            "a"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "a=(x=2,y=3); f[x]=@a x+y; f[9]"
      ],
      [
        [
          "EVAL",
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "a"
              ]
            ],
            [
              "ENV",
              [
                "BIND",
                [
                  "FORM",
                  [
                    "NAME",
                    "x"
                  ]
                ],
                [
                  "REAL",
                  "2"
                ]
              ],
              [
                "BIND",
                [
                  "FORM",
                  [
                    "NAME",
                    "y"
                  ]
                ],
                [
                  "REAL",
                  "3"
                ]
              ]
            ]
          ],
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "f"
              ],
              [
                "LIST",
                [
                  "NAME",
                  "x"
                ]
              ]
            ],
            [
              "AT",
              [
                "NAME",
                "a"
              ],
              [
                "PHRASE",
                [
                  "NAME",
                  "x"
                ],
                [
                  "OP",
                  "+"
                ],
                [
                  "NAME",
                  "y"
                ]
              ]
            ]
          ],
          [
            "PHRASE",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "REAL",
                "9"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f@e=10"
      ],
      [
        [
          "NAME",
          "f"
        ],
        "@e=10"
      ]
    ],
    [
      [
        "f[x].y"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "f"
          ],
          [
            "LIST",
            [
              "NAME",
              "x"
            ]
          ],
          [
            "ATTR",
            "y"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x . y"
      ],
      [
        [
          "VAR",
          [
            "NAME",
            "x"
          ],
          [
            "ATTR",
            "y"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "3"
      ],
      [
        [
          "REAL",
          "3"
        ],
        ""
      ]
    ],
    [
      [
        "x"
      ],
      [
        [
          "NAME",
          "x"
        ],
        ""
      ]
    ],
    [
      [
        "2.*4"
      ],
      [
        [
          "PHRASE",
          [
            "REAL",
            "2"
          ],
          [
            "OP",
            "."
          ],
          [
            "OP",
            "*"
          ],
          [
            "REAL",
            "4"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "2.4e-18"
      ],
      [
        [
          "REAL",
          "2.4",
          "-18"
        ],
        ""
      ]
    ],
    [
      [
        "2.4-1e-10I"
      ],
      [
        [
          "COMPLEX",
          [
            "REAL",
            "2.4"
          ],
          "-",
          [
            "REAL",
            "1",
            "-10"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "1+2*3"
      ],
      [
        [
          "PHRASE",
          [
            "REAL",
            "1"
          ],
          [
            "OP",
            "+"
          ],
          [
            "REAL",
            "2"
          ],
          [
            "OP",
            "*"
          ],
          [
            "REAL",
            "3"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "3!+4"
      ],
      [
        [
          "PHRASE",
          [
            "REAL",
            "3"
          ],
          [
            "OP",
            "!"
          ],
          [
            "OP",
            "+"
          ],
          [
            "REAL",
            "4"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[]"
      ],
      [
        [
          "LIST"
        ],
        ""
      ]
    ],
    [
      [
        "[2]"
      ],
      [
        [
          "LIST",
          [
            "REAL",
            "2"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[3, 4, 6]"
      ],
      [
        [
          "LIST",
          [
            "REAL",
            "3"
          ],
          [
            "REAL",
            "4"
          ],
          [
            "REAL",
            "6"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[]"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "f"
          ],
          [
            "LIST"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x = 5"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "x"
            ]
          ],
          [
            "REAL",
            "5"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x = 3 * f[3, 5, 7]"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "x"
            ]
          ],
          [
            "PHRASE",
            [
              "REAL",
              "3"
            ],
            [
              "OP",
              "*"
            ],
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "REAL",
                "3"
              ],
              [
                "REAL",
                "5"
              ],
              [
                "REAL",
                "7"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x]=1/x"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ],
          [
            "PHRASE",
            [
              "REAL",
              "1"
            ],
            [
              "OP",
              "/"
            ],
            [
              "NAME",
              "x"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[]=1"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST"
            ]
          ],
          [
            "REAL",
            "1"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x, y]=x*y"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ],
              [
                "NAME",
                "y"
              ]
            ]
          ],
          [
            "PHRASE",
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "*"
            ],
            [
              "NAME",
              "y"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[1,2;3,4]"
      ],
      [
        [
          "LINE"
        ],
        "[1,2;3,4]"
      ]
    ],
    [
      [
        "[x, y] -> x+y"
      ],
      [
        [
          "MAP",
          [
            "FORM",
            [
              "LIST",
              [
                "NAME",
                "x"
              ],
              [
                "NAME",
                "y"
              ]
            ]
          ],
          [
            "PHRASE",
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "+"
            ],
            [
              "NAME",
              "y"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[]->1"
      ],
      [
        [
          "MAP",
          [
            "FORM",
            [
              "LIST"
            ]
          ],
          [
            "REAL",
            "1"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[a, r..] -> [a, r..]"
      ],
      [
        [
          "MAP",
          [
            "FORM",
            [
              "LIST",
              [
                "NAME",
                "a"
              ],
              [
                "UNPACK",
                [
                  "NAME",
                  "r"
                ]
              ]
            ]
          ],
          [
            "LIST",
            [
              "NAME",
              "a"
            ],
            [
              "UNPACK",
              [
                "NAME",
                "r"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "(x=2)"
      ],
      [
        [
          "ENV",
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "x"
              ]
            ],
            [
              "REAL",
              "2"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "(x=1, y=2) x+y"
      ],
      [
        [
          "PHRASE",
          [
            "ENV",
            [
              "BIND",
              [
                "FORM",
                [
                  "NAME",
                  "x"
                ]
              ],
              [
                "REAL",
                "1"
              ]
            ],
            [
              "BIND",
              [
                "FORM",
                [
                  "NAME",
                  "y"
                ]
              ],
              [
                "REAL",
                "2"
              ]
            ]
          ],
          [
            "NAME",
            "x"
          ],
          [
            "OP",
            "+"
          ],
          [
            "NAME",
            "y"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "l[x:2]"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "l"
          ],
          [
            "LIST",
            [
              "PHRASE",
              [
                "NAME",
                "x"
              ],
              [
                "OP",
                ":"
              ],
              [
                "REAL",
                "2"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[x for x in [1,2,3]]"
      ],
      [
        [
          "LIST",
          [
            "PHRASE",
            [
              "NAME",
              "x"
            ],
            [
              "NAME",
              "for"
            ],
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "in "
            ],
            [
              "LIST",
              [
                "REAL",
                "1"
              ],
              [
                "REAL",
                "2"
              ],
              [
                "REAL",
                "3"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[1:]"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "f"
          ],
          [
            "LIST",
            [
              "PHRASE",
              [
                "REAL",
                "1"
              ],
              [
                "OP",
                ":"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "m[1:, :-1]"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "m"
          ],
          [
            "LIST",
            [
              "PHRASE",
              [
                "REAL",
                "1"
              ],
              [
                "OP",
                ":"
              ]
            ],
            [
              "PHRASE",
              [
                "OP",
                ":"
              ],
              [
                "OP",
                "-"
              ],
              [
                "REAL",
                "1"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "dir x"
      ],
      [
        [
          "DIR",
          [
            "NAME",
            "x"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "del x, y"
      ],
      [
        [
          "DEL",
          [
            "NAME",
            "x"
          ],
          [
            "NAME",
            "y"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "config LATEX on"
      ],
      [
        [
          "CONF",
          "LATEX",
          "on"
        ],
        ""
      ]
    ],
    [
      [
        "import gauss_jordan -t"
      ],
      [
        [
          "IMPORT",
          "gauss_jordan"
        ],
        " -t"
      ]
    ],
    [
      [
        "f[x] = x;  # the semicolon hides the output"
      ],
      [
        [
          "LINE",
          [
            "EVAL",
            [
              "BIND",
              [
                "FORM",
                [
                  "NAME",
                  "f"
                ],
                [
                  "LIST",
                  [
                    "NAME",
                    "x"
                  ]
                ]
              ],
              [
                "NAME",
                "x"
              ]
            ],
            ";"
          ],
          [
            "COMMENT",
            "the semicolon hides the output"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "2:-3"
      ],
      [
        [
          "PHRASE",
          [
            "REAL",
            "2"
          ],
          [
            "OP",
            ":"
          ],
          [
            "OP",
            "-"
          ],
          [
            "REAL",
            "3"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x .f"
      ],
      [
        [
          "VAR",
          [
            "NAME",
            "x"
          ],
          [
            "ATTR",
            "f"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f.a.b[x] = f[x]"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "VAR",
              [
                "NAME",
                "f"
              ],
              [
                "ATTR",
                "a"
              ],
              [
                "ATTR",
                "b"
              ]
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ],
          [
            "PHRASE",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x, y, z=0, w..] = 1"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ],
              [
                "NAME",
                "y"
              ],
              [
                "KWD",
                [
                  "NAME",
                  "z"
                ],
                [
                  "REAL",
                  "0"
                ]
              ],
              [
                "UNPACK",
                [
                  "NAME",
                  "w"
                ]
              ]
            ]
          ],
          [
            "REAL",
            "1"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[3, 4] if x==3 else (x=2, y=3) x+y"
      ],
      [
        [
          "PHRASE",
          [
            "LIST",
            [
              "REAL",
              "3"
            ],
            [
              "REAL",
              "4"
            ]
          ],
          [
            "OP",
            "if "
          ],
          [
            "NAME",
            "x"
          ],
          [
            "OP",
            "=="
          ],
          [
            "REAL",
            "3"
          ],
          [
            "NAME",
            "else"
          ],
          [
            "ENV",
            [
              "BIND",
              [
                "FORM",
                [
                  "NAME",
                  "x"
                ]
              ],
              [
                "REAL",
                "2"
              ]
            ],
            [
              "BIND",
              [
                "FORM",
                [
                  "NAME",
                  "y"
                ]
              ],
              [
                "REAL",
                "3"
              ]
            ]
          ],
          [
            "NAME",
            "x"
          ],
          [
            "OP",
            "+"
          ],
          [
            "NAME",
            "y"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[x+f[f[3*6]^2], [2, 6], g[3, 6]]"
      ],
      [
        [
          "LIST",
          [
            "PHRASE",
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "+"
            ],
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "PHRASE",
                [
                  "NAME",
                  "f"
                ],
                [
                  "LIST",
                  [
                    "PHRASE",
                    [
                      "REAL",
                      "3"
                    ],
                    [
                      "OP",
                      "*"
                    ],
                    [
                      "REAL",
                      "6"
                    ]
                  ]
                ],
                [
                  "OP",
                  "^"
                ],
                [
                  "REAL",
                  "2"
                ]
              ]
            ]
          ],
          [
            "LIST",
            [
              "REAL",
              "2"
            ],
            [
              "REAL",
              "6"
            ]
          ],
          [
            "PHRASE",
            [
              "NAME",
              "g"
            ],
            [
              "LIST",
              [
                "REAL",
                "3"
              ],
              [
                "REAL",
                "6"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[x, [y, z..], w..] -> [x+y+z, w]"
      ],
      [
        [
          "MAP",
          [
            "FORM",
            [
              "LIST",
              [
                "NAME",
                "x"
              ],
              [
                "LIST",
                [
                  "NAME",
                  "y"
                ],
                [
                  "UNPACK",
                  [
                    "NAME",
                    "z"
                  ]
                ]
              ],
              [
                "UNPACK",
                [
                  "NAME",
                  "w"
                ]
              ]
            ]
          ],
          [
            "LIST",
            [
              "PHRASE",
              [
                "NAME",
                "x"
              ],
              [
                "OP",
                "+"
              ],
              [
                "NAME",
                "y"
              ],
              [
                "OP",
                "+"
              ],
              [
                "NAME",
                "z"
              ]
            ],
            [
              "NAME",
              "w"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "(x*('y+2))/3"
      ],
      [
        [
          "LINE"
        ],
        "(x*('y+2))/3"
      ]
    ],
    [
      [
        "[x+y for x in 1:10 if x%2 for y in range[x]]"
      ],
      [
        [
          "LIST",
          [
            "PHRASE",
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "+"
            ],
            [
              "NAME",
              "y"
            ],
            [
              "NAME",
              "for"
            ],
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "in "
            ],
            [
              "REAL",
              "1"
            ],
            [
              "OP",
              ":"
            ],
            [
              "REAL",
              "10"
            ],
            [
              "OP",
              "if "
            ],
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "%"
            ],
            [
              "REAL",
              "2"
            ],
            [
              "NAME",
              "for"
            ],
            [
              "NAME",
              "y"
            ],
            [
              "OP",
              "in "
            ],
            [
              "NAME",
              "range"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "a . b"
      ],
      [
        [
          "VAR",
          [
            "NAME",
            "a"
          ],
          [
            "ATTR",
            "b"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "x : 2"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "x"
          ],
          [
            "OP",
            ":"
          ],
          [
            "REAL",
            "2"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "(3"
      ],
      [
        [
          "LINE"
        ],
        "(3"
      ]
    ],
    [
      [
        "[3, f(4])"
      ],
      [
        [
          "LINE"
        ],
        "[3, f(4])"
      ]
    ],
    [
      [
        "f[3, [5]"
      ],
      [
        [
          "NAME",
          "f"
        ],
        "[3, [5]"
      ]
    ],
    [
      [
        "[2, 4] + [6, 7"
      ],
      [
        [
          "PHRASE",
          [
            "LIST",
            [
              "REAL",
              "2"
            ],
            [
              "REAL",
              "4"
            ]
          ],
          [
            "OP",
            "+"
          ]
        ],
        " [6, 7"
      ]
    ],
    [
      [
        "[a.., b..] -> [a; b]"
      ],
      [
        [
          "PHRASE",
          [
            "LIST",
            [
              "UNPACK",
              [
                "NAME",
                "a"
              ]
            ],
            [
              "UNPACK",
              [
                "NAME",
                "b"
              ]
            ]
          ],
          [
            "OP",
            "-"
          ],
          [
            "OP",
            ">"
          ]
        ],
        " [a; b]"
      ]
    ],
    [
      [
        "[1,[1]..]"
      ],
      [
        [
          "LIST",
          [
            "REAL",
            "1"
          ],
          [
            "UNPACK",
            [
              "LIST",
              [
                "REAL",
                "1"
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f x = 1"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "NAME",
              "x"
            ]
          ],
          [
            "REAL",
            "1"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x]=x"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ],
          [
            "NAME",
            "x"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[[]]"
      ],
      [
        [
          "LIST",
          [
            "LIST"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "(f[x]=x,g[y]=f[2*y])"
      ],
      [
        [
          "ENV",
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "f"
              ],
              [
                "LIST",
                [
                  "NAME",
                  "x"
                ]
              ]
            ],
            [
              "NAME",
              "x"
            ]
          ],
          [
            "BIND",
            [
              "FORM",
              [
                "NAME",
                "g"
              ],
              [
                "LIST",
                [
                  "NAME",
                  "y"
                ]
              ]
            ],
            [
              "PHRASE",
              [
                "NAME",
                "f"
              ],
              [
                "LIST",
                [
                  "PHRASE",
                  [
                    "REAL",
                    "2"
                  ],
                  [
                    "OP",
                    "*"
                  ],
                  [
                    "NAME",
                    "y"
                  ]
                ]
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[a,b]=[2,3]"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "LIST",
              [
                "NAME",
                "a"
              ],
              [
                "NAME",
                "b"
              ]
            ]
          ],
          [
            "LIST",
            [
              "REAL",
              "2"
            ],
            [
              "REAL",
              "3"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "[a,b.c]=[3,5]"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "LIST",
              [
                "NAME",
                "a"
              ],
              [
                "VAR",
                [
                  "NAME",
                  "b"
                ],
                [
                  "ATTR",
                  "c"
                ]
              ]
            ]
          ],
          [
            "LIST",
            [
              "REAL",
              "3"
            ],
            [
              "REAL",
              "5"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "a-1"
      ],
      [
        [
          "PHRASE",
          [
            "NAME",
            "a"
          ],
          [
            "OP",
            "-"
          ],
          [
            "REAL",
            "1"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "0.5*2^2 + lg(100+10*90)"
      ],
      [
        [
          "PHRASE",
          [
            "REAL",
            "0.5"
          ],
          [
            "OP",
            "*"
          ],
          [
            "REAL",
            "2"
          ],
          [
            "OP",
            "^"
          ],
          [
            "REAL",
            "2"
          ],
          [
            "OP",
            "+"
          ],
          [
            "NAME",
            "lg"
          ],
          [
            "PHRASE",
            [
              "REAL",
              "100"
            ],
            [
              "OP",
              "+"
            ],
            [
              "REAL",
              "10"
            ],
            [
              "OP",
              "*"
            ],
            [
              "REAL",
              "90"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[a=3]=0"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "KWD",
                [
                  "NAME",
                  "a"
                ],
                [
                  "REAL",
                  "3"
                ]
              ]
            ]
          ],
          [
            "REAL",
            "0"
          ]
        ],
        ""
      ]
    ],
    [
      [
        "@a x+y"
      ],
      [
        [
          "AT",
          [
            "NAME",
            "a"
          ],
          [
            "PHRASE",
            [
              "NAME",
              "x"
            ],
            [
              "OP",
              "+"
            ],
            [
              "NAME",
              "y"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "f[x] = @g[x,0] 3a"
      ],
      [
        [
          "BIND",
          [
            "FORM",
            [
              "NAME",
              "f"
            ],
            [
              "LIST",
              [
                "NAME",
                "x"
              ]
            ]
          ],
          [
            "AT",
            [
              "NAME",
              "g"
            ],
            [
              "PHRASE",
              [
                "LIST",
                [
                  "NAME",
                  "x"
                ],
                [
                  "REAL",
                  "0"
                ]
              ],
              [
                "REAL",
                "3"
              ],
              [
                "NAME",
                "a"
              ]
            ]
          ]
        ],
        ""
      ]
    ]
  ],
  "parse_grammar": [
    [
      [
        "ALT",
        ", -"
      ],
      [
        [
          "ALT",
          [
            "ITEM_OP",
            [
              "ITEM",
              [
                "ATOM",
                [
                  "MARK",
                  ","
                ]
              ]
            ],
            [
              "OP",
              "-"
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "DEF",
        "LIST    := @LST \"[\" \"]\" ; @SEQ , /.*/"
      ],
      [
        [
          "DEF",
          [
            "OBJ",
            "LIST"
          ],
          ":=",
          [
            "EXP",
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "MACRO",
                    "@LST",
                    [
                      "ITEMS",
                      [
                        "ITEM",
                        [
                          "ATOM",
                          [
                            "STR",
                            "\"[\""
                          ]
                        ]
                      ],
                      [
                        "ITEMS",
                        [
                          "ITEM",
                          [
                            "ATOM",
                            [
                              "STR",
                              "\"]\""
                            ]
                          ]
                        ],
                        [
                          "ITEMS",
                          [
                            "ITEM",
                            [
                              "ATOM",
                              [
                                "MARK",
                                ";"
                              ]
                            ]
                          ],
                          [
                            "ITEMS",
                            [
                              "ITEM",
                              [
                                "MACRO",
                                "@SEQ",
                                [
                                  "ITEMS",
                                  [
                                    "ITEM",
                                    [
                                      "ATOM",
                                      [
                                        "MARK",
                                        ","
                                      ]
                                    ]
                                  ],
                                  [
                                    "ITEMS",
                                    [
                                      "ITEM",
                                      [
                                        "ATOM",
                                        [
                                          "RE",
                                          "/.*/"
                                        ]
                                      ]
                                    ]
                                  ]
                                ]
                              ]
                            ]
                          ]
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "DEF",
        "EXP := LOCAL | LAMBDA | IF_ELSE | OP_SEQ"
      ],
      [
        [
          "DEF",
          [
            "OBJ",
            "EXP"
          ],
          ":=",
          [
            "EXP",
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "ATOM",
                    [
                      "OBJ",
                      "LOCAL"
                    ]
                  ]
                ]
              ]
            ],
            "|",
            [
              "EXP",
              [
                "ALT",
                [
                  "ITEM_OP",
                  [
                    "ITEM",
                    [
                      "ATOM",
                      [
                        "OBJ",
                        "LAMBDA"
                      ]
                    ]
                  ]
                ]
              ],
              "|",
              [
                "EXP",
                [
                  "ALT",
                  [
                    "ITEM_OP",
                    [
                      "ITEM",
                      [
                        "ATOM",
                        [
                          "OBJ",
                          "IF_ELSE"
                        ]
                      ]
                    ]
                  ]
                ],
                "|",
                [
                  "EXP",
                  [
                    "ALT",
                    [
                      "ITEM_OP",
                      [
                        "ITEM",
                        [
                          "ATOM",
                          [
                            "OBJ",
                            "OP_SEQ"
                          ]
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "DEF",
        "LC := ( BLIST | BIND * ) ? \"->\" EXP"
      ],
      [
        [
          "DEF",
          [
            "OBJ",
            "LC"
          ],
          ":=",
          [
            "EXP",
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "GROUP",
                    "(",
                    [
                      "EXP",
                      [
                        "ALT",
                        [
                          "ITEM_OP",
                          [
                            "ITEM",
                            [
                              "ATOM",
                              [
                                "OBJ",
                                "BLIST"
                              ]
                            ]
                          ]
                        ]
                      ],
                      "|",
                      [
                        "EXP",
                        [
                          "ALT",
                          [
                            "ITEM_OP",
                            [
                              "ITEM",
                              [
                                "ATOM",
                                [
                                  "OBJ",
                                  "BIND"
                                ]
                              ]
                            ],
                            [
                              "OP",
                              "*"
                            ]
                          ]
                        ]
                      ]
                    ],
                    ")"
                  ]
                ],
                [
                  "OP",
                  "?"
                ]
              ],
              [
                "ALT",
                [
                  "ITEM_OP",
                  [
                    "ITEM",
                    [
                      "ATOM",
                      [
                        "STR",
                        "\"->\""
                      ]
                    ]
                  ]
                ],
                [
                  "ALT",
                  [
                    "ITEM_OP",
                    [
                      "ITEM",
                      [
                        "ATOM",
                        [
                          "OBJ",
                          "EXP"
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ],
        ""
      ]
    ],
    [
      [
        "DEF",
        "@M $A := $A $A +"
      ],
      [
        [
          "DEF",
          [
            "MACRO",
            "@M",
            [
              "VARS",
              [
                "VAR",
                "$A"
              ]
            ]
          ],
          ":=",
          [
            "EXP",
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "ATOM",
                    [
                      "VAR",
                      "$A"
                    ]
                  ]
                ]
              ],
              [
                "ALT",
                [
                  "ITEM_OP",
                  [
                    "ITEM",
                    [
                      "ATOM",
                      [
                        "VAR",
                        "$A"
                      ]
                    ]
                  ],
                  [
                    "OP",
                    "+"
                  ]
                ]
              ]
            ]
          ]
        ],
        ""
      ]
    ]
  ],
  "refactor_tree": [
    [
      [
        [
          "DEF",
          [
            "OBJ",
            "EXP"
          ],
          ":=",
          [
            "EXP",
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "ATOM",
                    [
                      "OBJ",
                      "LOCAL"
                    ]
                  ]
                ]
              ]
            ],
            "|",
            [
              "EXP",
              [
                "ALT",
                [
                  "ITEM_OP",
                  [
                    "ITEM",
                    [
                      "ATOM",
                      [
                        "OBJ",
                        "LAMBDA"
                      ]
                    ]
                  ]
                ]
              ],
              "|",
              [
                "EXP",
                [
                  "ALT",
                  [
                    "ITEM_OP",
                    [
                      "ITEM",
                      [
                        "ATOM",
                        [
                          "OBJ",
                          "IF_ELSE"
                        ]
                      ]
                    ]
                  ]
                ],
                "|",
                [
                  "EXP",
                  [
                    "ALT",
                    [
                      "ITEM_OP",
                      [
                        "ITEM",
                        [
                          "ATOM",
                          [
                            "OBJ",
                            "OP_SEQ"
                          ]
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ]
      ],
      [
        "DEF",
        [
          "OBJ",
          "EXP"
        ],
        ":=",
        [
          "EXP",
          [
            "ALT",
            [
              "ITEM_OP",
              [
                "ITEM",
                [
                  "ATOM",
                  [
                    "OBJ",
                    "LOCAL"
                  ]
                ]
              ]
            ]
          ],
          "|",
          [
            "EXP",
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "ATOM",
                    [
                      "OBJ",
                      "LAMBDA"
                    ]
                  ]
                ]
              ]
            ],
            "|",
            [
              "EXP",
              [
                "ALT",
                [
                  "ITEM_OP",
                  [
                    "ITEM",
                    [
                      "ATOM",
                      [
                        "OBJ",
                        "IF_ELSE"
                      ]
                    ]
                  ]
                ]
              ],
              "|",
              [
                "EXP",
                [
                  "ALT",
                  [
                    "ITEM_OP",
                    [
                      "ITEM",
                      [
                        "ATOM",
                        [
                          "OBJ",
                          "OP_SEQ"
                        ]
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ]
      ]
    ],
    [
      [
        [
          "EXP",
          [
            "ALT",
            [
              "ITEM_OP",
              [
                "ITEM",
                [
                  "GROUP",
                  "(",
                  [
                    "EXP",
                    [
                      "ALT",
                      [
                        "ITEM_OP",
                        [
                          "ITEM",
                          [
                            "ATOM",
                            [
                              "OBJ",
                              "BLIST"
                            ]
                          ]
                        ]
                      ]
                    ],
                    "|",
                    [
                      "EXP",
                      [
                        "ALT",
                        [
                          "ITEM_OP",
                          [
                            "ITEM",
                            [
                              "ATOM",
                              [
                                "OBJ",
                                "BIND"
                              ]
                            ]
                          ],
                          [
                            "OP",
                            "*"
                          ]
                        ]
                      ]
                    ]
                  ],
                  ")"
                ]
              ],
              [
                "OP",
                "?"
              ]
            ],
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "ATOM",
                    [
                      "STR",
                      "\"->\""
                    ]
                  ]
                ]
              ],
              [
                "ALT",
                [
                  "ITEM_OP",
                  [
                    "ITEM",
                    [
                      "ATOM",
                      [
                        "OBJ",
                        "EXP"
                      ]
                    ]
                  ]
                ]
              ]
            ]
          ]
        ]
      ],
      [
        "EXP",
        [
          "ALT",
          [
            "ITEM_OP",
            [
              "ITEM",
              [
                "GROUP",
                "(",
                [
                  "EXP",
                  [
                    "ALT",
                    [
                      "ITEM_OP",
                      [
                        "ITEM",
                        [
                          "ATOM",
                          [
                            "OBJ",
                            "BLIST"
                          ]
                        ]
                      ]
                    ]
                  ],
                  "|",
                  [
                    "EXP",
                    [
                      "ALT",
                      [
                        "ITEM_OP",
                        [
                          "ITEM",
                          [
                            "ATOM",
                            [
                              "OBJ",
                              "BIND"
                            ]
                          ]
                        ],
                        [
                          "OP",
                          "*"
                        ]
                      ]
                    ]
                  ]
                ],
                ")"
              ]
            ],
            [
              "OP",
              "?"
            ]
          ],
          [
            "ALT",
            [
              "ITEM_OP",
              [
                "ITEM",
                [
                  "ATOM",
                  [
                    "STR",
                    "\"->\""
                  ]
                ]
              ]
            ],
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "ITEM",
                  [
                    "ATOM",
                    [
                      "OBJ",
                      "EXP"
                    ]
                  ]
                ]
              ]
            ]
          ]
        ]
      ]
    ]
  ],
  "calc_grammar": [
    [
      [
        [
          "LIST    := @LST \"[\" \"]\" ; @SEQ , /.*/",
          "@LST $OPN $CLS $SEP $ITM := $OPN $CLS | $OPN $ITM ( $SEP $ITM ) * $CLS",
          "@SEQ $SEP $ITM           := $ITM ? ( $SEP $ITM ) *"
        ]
      ],
      {
        " ": "\\s*",
        "LIST": [
          "EXP",
          [
            "ALT",
            [
              "STR",
              "\"[\""
            ],
            [
              "STR",
              "\"]\""
            ]
          ],
          [
            "ALT",
            [
              "STR",
              "\"[\""
            ],
            [
              "ALT",
              [
                "ITEM_OP",
                [
                  "RE",
                  "/.*/"
                ],
                [
                  "OP",
                  "?"
                ]
              ],
              [
                "ITEM_OP",
                [
                  "ALT",
                  [
                    "MARK",
                    ","
                  ],
                  [
                    "RE",
                    "/.*/"
                  ]
                ],
                [
                  "OP",
                  "*"
                ]
              ]
            ],
            [
              "ITEM_OP",
              [
                "ALT",
                [
                  "MARK",
                  ";"
                ],
                [
                  "ALT",
                  [
                    "ITEM_OP",
                    [
                      "RE",
                      "/.*/"
                    ],
                    [
                      "OP",
                      "?"
                    ]
                  ],
                  [
                    "ITEM_OP",
                    [
                      "ALT",
                      [
                        "MARK",
                        ","
                      ],
                      [
                        "RE",
                        "/.*/"
                      ]
                    ],
                    [
                      "OP",
                      "*"
                    ]
                  ]
                ]
              ],
              [
                "OP",
                "*"
              ]
            ],
            [
              "STR",
              "\"]\""
            ]
          ]
        ]
      }
    ]
  ]
}
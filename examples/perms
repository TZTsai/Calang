perms(l) := [[]] if l=[] else sum([[[l[i]] + p for p in \
perms(l@[j for j in range(len(l)) if j != i])] for i in range(len(l))])

perms([1,2,3]) #[[1, 2, 3], [1, 2, 2], [1, 1, 3], [1, 1, 1], [1, 1, 2], [1, 1, 1]]
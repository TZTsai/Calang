perms(l) := [l] if len(l) = 1 else with insert(l, a, i)=l[:i]+[a]+l[i:]: ...
    (first:l[0], rest:l[1:]) -> subperms:perms(rest) -> ...
    sum([[insert(p, first, i) | i in range(len(l))] | p in subperms])

#TEST
perms([1,2,3])
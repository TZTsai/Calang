pair(x, y) := {f} f(x, y)
first(p) := p({x, y} x)
second(p) := p({x, y} y)

nil := {x} nil
nil?(p) := function?(p) and p({x, y} 0) = nil

make_list(*nums) := nil if empty?(nums) else pair(car(nums), make_list(cdr(nums)))
map(f, lst) := nil if nil?(lst) else pair(f(first(lst)), map(f, second(lst)))

l := pair(1, pair(2, pair(3, pair(4, nil))))
sql := map(({x} x^2), l)
[first(sql), first(second(sql)), first(second(second(sql))), \
first(second(second(second(sql))))] #[1,4,9,16]